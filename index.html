<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è£œç¹³é‡‘é¡ç²¾ç®—å™¨ (V10 å®Œæ•´ç‰ˆ)</title>
    <style>
        :root {
            --bg-color: #f0f3f5;
            --card-bg: #ffffff;
            --text-main: #2d3436;
            --text-light: #636e72;
            --success: #00b894;
            --warning: #fdcb6e;
            --danger: #d63031;
            --primary: #6c5ce7;
            --border-radius: 12px;
        }
        body { font-family: "Microsoft JhengHei", "Segoe UI", sans-serif; background: var(--bg-color); color: var(--text-main); margin: 0; padding: 20px; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; }

        /* --- æ§åˆ¶é¢æ¿ --- */
        .dashboard-panel {
            background: var(--card-bg); padding: 30px; border-radius: var(--border-radius);
            box-shadow: 0 4px 20px rgba(0,0,0,0.05); margin-bottom: 25px; border-top: 5px solid var(--primary);
        }

        .header-row { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; }
        .market-metrics { text-align: right; }
        .metric-big { font-size: 2em; font-weight: 800; color: var(--danger); font-family: Consolas, monospace; }
        
        /* æ»‘æ¡¿å€åŸŸ */
        .slider-wrapper { position: relative; margin: 60px 20px 50px 20px; }
        input[type=range] { width: 100%; -webkit-appearance: none; background: transparent; z-index: 5; position: relative;}
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 28px; width: 28px; border-radius: 50%;
            background: var(--text-main); border: 4px solid #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.4);
            cursor: pointer; margin-top: -12px; 
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 10px; cursor: pointer; 
            background: linear-gradient(90deg, #55efc4 0%, #fab1a0 45%, #d63031 75%, #2d3436 100%); 
            border-radius: 5px;
        }
        
        .markers { position: absolute; top: 25px; width: 100%; height: 30px; pointer-events: none; }
        .marker-item { position: absolute; transform: translateX(-50%); text-align: center; font-size: 11px; color: #666; line-height: 1.2; }
        .marker-item::before { content: ''; display: block; width: 1px; height: 8px; background: #999; margin: 0 auto 5px auto; }
        .marker-year { font-weight: bold; color: var(--text-main); font-size: 12px; display: block; margin-bottom: 2px;}

        /* æƒ…å¢ƒèªªæ˜æ¡† */
        .scenario-box {
            background: #ecf0f1; border-left: 5px solid var(--primary);
            padding: 15px; margin-top: 20px; border-radius: 4px; font-size: 0.95em; transition: all 0.3s;
        }
        .scenario-box.black-swan { background: #2d3436; color: #fff; border-left-color: #d63031; }

        /* --- å¡ç‰‡è¨­è¨ˆ --- */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 20px; }
        
        .card {
            background: var(--card-bg); border-radius: var(--border-radius); padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.03); border: 1px solid #eee;
            position: relative; overflow: hidden; transition: transform 0.2s;
        }
        .card.safe { border-top: 5px solid var(--success); }
        .card.warn { border-top: 5px solid var(--warning); background-color: #fffaf0; }
        .card.danger { border-top: 5px solid var(--danger); background-color: #fff5f5; }

        .card-header { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #eee; display:flex; justify-content:space-between; align-items:flex-start;}
        .asset-info { display: flex; flex-direction: column; }
        .asset-name { font-weight: bold; font-size: 1.1em; }
        .duration-badge { font-size: 0.8em; color: var(--primary); background: #e3f2fd; padding: 2px 6px; border-radius: 4px; margin-top: 5px; width: fit-content;}
        .status-tag { padding: 4px 10px; border-radius: 20px; font-size: 0.75em; font-weight: bold; color: #fff; height: fit-content;}
        
        /* è¼¸å…¥æ¡†æ¨£å¼ */
        .input-group { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; font-size: 0.9em; }
        .input-wrapper { display: flex; align-items: center; }
        .editable-input {
            width: 80px; padding: 4px; border: 1px solid #ccc; border-radius: 4px;
            font-family: Consolas, monospace; font-weight: bold; font-size: 1em;
            text-align: right; margin-right: 5px; transition: border 0.3s; background: #fff;
        }
        .editable-input:focus { border-color: var(--primary); outline: none; background: #e8f0fe; }
        .unit { color: #888; font-size: 0.9em; }
        .val-sim { font-family: Consolas, monospace; font-weight: 600; color: var(--primary); }
        
        .bar-container { background: #eee; height: 8px; border-radius: 4px; margin-top: 15px; overflow: hidden; }
        .bar-fill { height: 100%; transition: width 0.3s ease, background-color 0.3s ease; }
        .bar-info { display: flex; justify-content: space-between; font-size: 0.8em; margin-top: 4px; color: var(--text-light); }

        /* --- è£œç¹³è­¦ç¤ºæ¡† --- */
        .alert-box {
            margin-top: 15px; padding: 10px; background: #ffe6e6; 
            border: 1px solid #ff4d4f; border-radius: 6px;
            color: #c0392b; font-size: 0.9em; display: none; /* é è¨­éš±è— */
            animation: fadeIn 0.5s;
        }
        .alert-amount { font-weight: bold; font-size: 1.2em; display: block; margin-top: 2px; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- Tabs --- */
        .info-section { margin-top: 40px; background: #fff; border-radius: var(--border-radius); box-shadow: 0 4px 20px rgba(0,0,0,0.05); overflow: hidden; }
        .tabs { display: flex; background: #f8f9fa; border-bottom: 1px solid #eee; overflow-x: auto;}
        .tab-btn { padding: 15px 25px; cursor: pointer; border: none; background: transparent; font-weight: bold; color: var(--text-light); white-space: nowrap; }
        .tab-btn.active { color: var(--primary); background: #fff; border-bottom: 3px solid var(--primary); }
        .tab-content { padding: 30px; display: none; }
        .tab-content.active { display: block; }
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .info-block h3 { border-bottom: 2px solid #eee; padding-bottom: 10px; color: var(--primary); margin-top: 0; }
        .info-list li { margin-bottom: 10px; }
        
        @media (max-width: 768px) { .info-grid { grid-template-columns: 1fr; } }

        /* é¡å¤–å¼·èª¿å€å¡Š */
        .focus-box {
            border-left: 4px solid var(--primary);
            background: #f5f7ff;
            padding: 15px 18px;
            border-radius: 8px;
            font-size: 0.95em;
            margin-top: 20px;
        }
        .focus-box strong { color: var(--primary); }
    </style>
</head>
<body>

<div class="container">
    <div class="dashboard-panel">
        <div class="header-row">
            <div>
                <h2>ğŸš¨ è£œç¹³é‡‘é¡ç²¾ç®—å™¨ (V10)</h2>
                <p>é‡å°ç©æ¥µå‹ä¿å–® & ETF è³ªæŠ¼ï¼Œè‡ªå‹•è¨ˆç®—è§£é™¤è¿½ç¹³æ‰€éœ€ç¾é‡‘</p>
            </div>
            <div class="market-metrics">
                <div class="metric-label">æ¨¡æ“¬å¤§ç›¤è·Œå¹…</div>
                <div id="marketDropDisplay" class="metric-big">0%</div>
            </div>
        </div>

        <div class="slider-wrapper">
            <input type="range" id="crashSlider" min="0" max="70" value="0" step="1" oninput="calculateAll()">
            
            <div class="markers">
                <div class="marker-item" style="left: 0%">0%</div>
                <div class="marker-item" style="left: 14%"><span class="marker-year">ä¿®æ­£</span>-10%</div>
                <div class="marker-item" style="left: 43%"><span class="marker-year">2020/22</span>-30%</div>
                <div class="marker-item" style="left: 71%"><span class="marker-year">2008</span>-50%</div>
                <div class="marker-item" style="left: 95%; color:var(--danger);"><span class="marker-year">2000</span>-67%</div>
            </div>
        </div>

        <div id="scenarioBox" class="scenario-box">
            <strong id="scenarioTitle">ğŸŸ¢ ç‹€æ…‹ï¼šå¹³ç©©</strong><br>
            <span id="scenarioDesc">æ‹‰å‹•æ»‘æ¡¿æ¨¡æ“¬è‚¡ç½ã€‚è‹¥å‡ºç¾è­¦ç¤ºç´…æ¡†ï¼Œä»£è¡¨éœ€è¦æº–å‚™ç¾é‡‘è£œç¹³ã€‚</span>
        </div>
    </div>

    <div class="grid" id="cardGrid"></div>

    <div class="info-section">
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('tab1', this)">ğŸ’° è£œç¹³è¨ˆç®—é‚è¼¯</button>
            <button class="tab-btn" onclick="switchTab('tab2', this)">ğŸ›¡ï¸ è‚¡ç½æ­·å²åˆ†æ</button>
            <button class="tab-btn" onclick="switchTab('tab3', this)">ğŸ“Š ä½ çš„è³‡ç”¢çµæ§‹è§£è®€</button>
        </div>

        <div id="tab1" class="tab-content active">
            <div class="info-grid">
                <div class="info-block">
                    <h3>ä¿å–®è£œç¹³è¦å‰‡ (LTV)</h3>
                    <p>ç•¶å€Ÿæ¬¾æ¯” (LTV) è¶…é 80% æ™‚ï¼ŒéŠ€è¡Œæœƒè¦æ±‚è£œç¹³æœ¬é‡‘ï¼Œä½¿ LTV é™å› 80% ä»¥ä¸‹ã€‚</p>
                    <p><strong>è¨ˆç®—å…¬å¼ï¼š</strong></p>
                    <div style="background:#f9f9f9; padding:10px; border-radius:5px; font-family:monospace;">
                        è£œç¹³é‡‘é¡ = ç›®å‰å€Ÿæ¬¾ - (ç›®å‰å¸‚å€¼ Ã— 80%)
                    </div>
                    <p style="font-size:0.9em; color:#666">æ­¤è¨ˆç®—å™¨æœƒé¡¯ç¤ºè®“æ‚¨å›åˆ°ã€Œå®‰å…¨ç¶ ç‡ˆã€æ‰€éœ€çš„æœ€ä½é‡‘é¡ã€‚</p>
                </div>
                <div class="info-block">
                    <h3>ETF è£œç¹³è¦å‰‡ (ç¶­æŒç‡)</h3>
                    <p>ç•¶ç¶­æŒç‡ä½æ–¼ 130% æ™‚ï¼Œåˆ¸å•†æœƒç™¼å‡ºè¿½ç¹³ä»¤ã€‚é€šå¸¸ SOP è¦æ±‚è£œè¶³è‡³ <strong>166%</strong> æ‰èƒ½è§£é™¤è¿½ç¹³ç´€éŒ„ã€‚</p>
                    <p><strong>è¨ˆç®—å…¬å¼ï¼š</strong></p>
                    <div style="background:#f9f9f9; padding:10px; border-radius:5px; font-family:monospace;">
                        è£œç¹³é‡‘é¡ = ç›®å‰å€Ÿæ¬¾ - (ç›®å‰å¸‚å€¼ Ã· 166%)
                    </div>
                    <p style="font-size:0.9em; color:#666">æˆ‘å€‘æ¡ç”¨æœ€åš´æ ¼æ¨™æº– (å›è£œè‡³ 166%) è¨ˆç®—ï¼Œç¢ºä¿æ‚¨çµ•å°å®‰å…¨ã€‚</p>
                </div>
            </div>
        </div>
        
        <div id="tab2" class="tab-content">
             <div class="info-block">
                <h3>å£“åŠ›æ¸¬è©¦é‡é» (2000å¹´ç¶²è·¯æ³¡æ²« -67%)</h3>
                <p>è«‹å°‡æ»‘æ¡¿æ‹‰åˆ°æœ€å³é‚Šï¼Œæ‚¨æœƒçœ‹åˆ°ï¼š</p>
                <ul class="info-list">
                    <li>ç©æ¥µå‹ä¿å–®å¯èƒ½å‡ºç¾ç´…è‰²è­¦ç¤ºæ¡†ï¼Œé¡¯ç¤ºéœ€è£œç¹³æ•¸è¬å…ƒè‡³æ•¸åè¬å…ƒä¸ç­‰ã€‚</li>
                    <li>é€™æ˜¯æ‚¨éœ€è¦é ç•™çš„ã€Œæ¥µé™é€±è½‰é‡‘ã€ã€‚è‹¥æ‚¨æ‰‹ä¸Šçš„ã€Œä¿å–® E (é é›„)ã€åƒ¹å€¼ + ç¾é‡‘å­˜é‡ â‰¥ ç´…æ¡†é‡‘é¡ç¸½å’Œï¼Œä»£è¡¨å³ä½¿é‡æ¼” 2000 å¹´ç´šåˆ¥çš„è‚¡ç½ï¼Œä½ ä»å¯ç”¨é€™äº›è³‡ç”¢è£œå›å®‰å…¨ç·šï¼Œè€Œä¸ç”¨è¢«å¼·è¿«æ–·é ­ã€‚</li>
                    <li>è‹¥åœ¨ -30% ï½ -40% å€é–“ï¼Œå¤šæ•¸å¡ç‰‡ä»ç¶­æŒç¶ ç‡ˆæˆ–å°‘æ•¸é»ƒç‡ˆï¼Œä»£è¡¨ä½ çš„æ•´é«”æ§“æ¡¿æ˜¯ã€Œåç©æ¥µä½†å¯æ‰¿å— 1ï½2 æ¬¡å¤§å‹è‚¡ç½ã€çš„ç­‰ç´šã€‚</li>
                </ul>
                <p style="font-size:0.9em; color:#666">ç°¡å–®ä¾†èªªï¼š<br>é€™å€‹ Tab ç”¨ä¾†æ¸¬è©¦ã€Œæœ€å£æƒ…æ³ã€ï¼Œä¸æ˜¯è®“ä½ é æ¸¬å¸‚å ´ï¼Œè€Œæ˜¯å¹«ä½ ç¢ºèªï¼šå°±ç®—ä¸–ç•Œå†æ¬¡å´©ä¸€æ¬¡ï¼Œä½ ä¹Ÿä¸æœƒè¢«å¸‚å ´å¼·è¿«æ¸…ç®—ã€‚</p>
            </div>
        </div>

        <div id="tab3" class="tab-content">
            <div class="info-block">
                <h3>é€™å…­å¼µå¡ç‰‡ï¼Œå…¶å¯¦å°±æ˜¯ä½ çš„çœŸå¯¦è³‡ç”¢ç¸®å°ç‰ˆ</h3>
                <p>æœ¬å·¥å…·ä¸æ˜¯ä¸€èˆ¬æ•™å­¸ç”¨ç¯„ä¾‹ï¼Œè€Œæ˜¯ç‚ºäº†ä½ çš„å¯¦éš›çµæ§‹é‡èº«æ‰“é€ ï¼š</p>
                <ul class="info-list">
                    <li><strong>ä¿å–® Aï½Dï¼š</strong>å››å¼µä»¥ <strong>æ”¶ç›Šæˆé•· / å¹³è¡¡å‹åŸºé‡‘</strong> ç‚ºä¸»çš„æŠ•è³‡å‹ä¿å–®ï¼Œå±¬æ–¼<strong>ç©æ¥µå‹ç¾é‡‘æµè³‡ç”¢</strong>ï¼ŒåŒæ™‚æœ‰é…æ¯ã€ä¹Ÿæ‰¿æ“”è‚¡å‚µåƒ¹æ ¼æ³¢å‹•ã€‚</li>
                    <li><strong>ä¿å–® Eï¼š</strong>åå‘<strong>å„²è“„ / ä¿å®ˆå‹</strong>ä¿å–®ï¼Œå€Ÿæ¬¾æ¯”èˆ‡è£œç¹³ç·šè¼ƒé«˜ï¼Œä¸»è¦åŠŸèƒ½æ˜¯ç•¶ä½œä½ æ¥µç«¯æƒ…æ³ä¸‹å¯ä»¥å‹•ç”¨çš„ã€Œé˜²ç¦¦è³‡ç”¢ã€ã€‚</li>
                    <li><strong>ETF çµ„åˆï¼š</strong>å°è‚¡é«˜è‚¡æ¯ + æŠ•è³‡ç´šå‚µç‚ºä¸»ï¼Œç›®å‰ç¶­æŒç‡å¾ˆé«˜ï¼ˆé è¨­ç‚ºå¥åº·çš„ 400%+ ç­‰ç´šï¼‰ï¼Œåšç‚ºé¡å¤–å¯å‹•ç”¨çš„æ§“æ¡¿å·¥å…·èˆ‡é…æ¯ä¾†æºã€‚</li>
                </ul>
                <p>ç¨‹å¼ä¸­çš„æ¯ä¸€ç­†æ•¸å­—ï¼ˆç¾å€¼ã€å€Ÿæ¬¾ã€è£œç¹³ç·šï¼‰éƒ½å°æ‡‰åˆ°ä½ ç›®å‰å¯¦éš›çš„å¤§æ–¹å‘ï¼Œåªæ˜¯ç”¨ã€Œè¬ã€ç‚ºå–®ä½ç²¾ç°¡å‘ˆç¾ï¼Œæ–¹ä¾¿ä½ åšå£“åŠ›æ¸¬è©¦ã€‚</p>
            </div>

            <div class="info-block">
                <h3>é€™å€‹å£“åŠ›æ¸¬è©¦åœ¨å›ç­”ä¸‰å€‹å•é¡Œ</h3>
                <ol class="info-list">
                    <li><strong>å•é¡Œä¸€ï¼šå†ä¾†ä¸€å€‹ 2020 / 2022 (-30%)ï¼Œä½ æœƒä¸æœƒè¢«è¿½ç¹³ï¼Ÿ</strong><br>
                        å°‡æ»‘æ¡¿æ‹‰åˆ° <strong>-30%</strong> å·¦å³ï¼Œè§€å¯Ÿï¼š<br>
                        è‹¥å¤§éƒ¨åˆ†å¡ç‰‡ä»ç‚ºç¶ ç‡ˆï¼ˆæˆ–å°‘æ•¸é»ƒç‡ˆä¸”è£œç¹³é‡‘é¡ä¸å¤§ï¼‰ï¼Œä»£è¡¨ä½ çš„æ•´é«”æ§“æ¡¿åœ¨ã€Œä¸­ä½ï½ä¸­ã€æ°´æº–ï¼Œå¯ä»¥æ‰¿å—ä¸€è¼ªé¡ä¼¼ 2020 çš„è‚¡ç½ï¼Œä¸æœƒç«‹å³çˆ†æ‰ã€‚
                    </li>
                    <li><strong>å•é¡ŒäºŒï¼šå¦‚æœæ˜¯ 2008 ç´šåˆ¥ (-50%) å‘¢ï¼Ÿ</strong><br>
                        æ‹‰åˆ° <strong>-50%</strong>ï¼Œç´…æ¡†è®Šå¤šä»£è¡¨å£“åŠ›é–‹å§‹æ”¾å¤§ã€‚<br>
                        æ­¤æ™‚ä½ å¯ä»¥æŠŠæ‰€æœ‰ç´…æ¡†çš„ã€Œéœ€è£œç¹³é‡‘é¡ã€åŠ ç¸½ï¼Œç•¶æˆéœ€è¦æº–å‚™çš„ã€Œ<strong>è‚¡ç½å°ˆç”¨ç·Šæ€¥é å‚™é‡‘</strong>ã€ã€‚<br>
                        è‹¥ä½ ç›®å‰çš„ï¼š<br>
                        <code>ç¾é‡‘å­˜é‡ +ï¼ˆä¿å–® E è§£ç´„é‡‘æˆ–å¯å€Ÿå‡ºé‡‘é¡ï¼‰ â‰¥ ç´…æ¡†ç¸½é¡</code><br>
                        ä»£è¡¨ï¼šå°±ç®— 2008 é‡æ¼”ï¼Œä½ ä¹Ÿåªæ˜¯ã€Œå¾ˆä¸èˆ’æœã€ï¼Œä½†ä¸æœƒè¢«å¸‚å ´å¼·åˆ¶å¹³å€‰ã€‚
                    </li>
                    <li><strong>å•é¡Œä¸‰ï¼šæ¥µç«¯çš„ 2000 ç¶²è·¯æ³¡æ²«ç´šåˆ¥ (-67%)ï¼Œä½ çš„æ¥µé™åœ¨å“ªï¼Ÿ</strong><br>
                        æ»‘åˆ°æœ€å³å´ <strong>-67%</strong> æ™‚ï¼Œæ•´å¼µåœ–å°±æ˜¯åœ¨æ¨¡æ“¬ã€Œæ¥µç«¯é»‘å¤©éµã€ã€‚<br>
                        é€™æ™‚å€™ï¼Œç´…æ¡†ç¸½é¡ = ä½ åœ¨æœ€æ…˜æƒ…å¢ƒä¸‹ï¼Œéœ€è¦å¾ï¼š<br>
                        <ul>
                            <li>ä¿å®ˆè³‡ç”¢ï¼ˆä¾‹å¦‚ä¿å–® Eï¼‰</li>
                            <li>æ‰‹ä¸Šç¾é‡‘</li>
                            <li>æœªå‹•ç”¨çš„ä¿¡è²¸é¡åº¦ / è‚¡ç¥¨è³ªæŠ¼å¯å†å€Ÿé¡åº¦</li>
                        </ul>
                        ä¸­èª¿åº¦å‡ºä¾†çš„ã€Œæ•‘å‘½ç±Œç¢¼ã€ã€‚<br>
                        å¦‚æœä½ ç™¼ç¾ï¼šå°±ç®—åœ¨ -67%ï¼Œä½ ä»ç„¶æœ‰è¶³å¤ çš„ <strong>ã€Œé å‚™é‡‘ + å¯å‹•ç”¨è³‡é‡‘ã€ï¼ ç´…æ¡†ç¸½é¡</strong>ï¼Œé‚£ä»£è¡¨ä½ çš„æ•´é«”çµæ§‹å…¶å¯¦éå¸¸æœ‰æŠ—å£“æ€§ã€‚
                    </li>
                </ol>
            </div>

            <!-- ä½ æœ€åœ¨æ„çš„é‡é»èªªæ˜ -->
            <div class="info-block">
                <h3>ä½ æœ€åœ¨æ„çš„ä¸€ä»¶äº‹ï¼šæœƒä¸æœƒä¸€è·Œå°±è¢«è¿½ç¹³ã€è¢«è¿«æ–·é ­ï¼Ÿ</h3>
                <div class="focus-box">
                    <p><strong>é€™å¥—å·¥å…·ä¸æ˜¯åœ¨é æ¸¬ä½ èƒ½è³ºå¤šå°‘ï¼Œè€Œæ˜¯åœ¨å›ç­”ï¼š</strong><br>
                    ã€Œ<strong>è‚¡ç½ä¾†çš„æ™‚å€™ï¼Œæˆ‘æœƒä¸æœƒè¢«è¿½ç¹³ï¼Ÿæœƒä¸æœƒè¢«è¿«è³£åœ¨æœ€ä½é»ï¼Ÿ</strong>ã€</p>
                </div>

                <h4>â‘  è³‡ç”¢è·Œå¤šå°‘ä¸æ˜¯é—œéµï¼ŒçœŸæ­£å¯æ€•çš„æ˜¯ã€Œè¢«è¿½ç¹³ã€</h4>
                <p>å°±ç®—è³‡ç”¢å¸³é¢è·Œäº† 30%ã€40%ã€50%ï¼Œåªè¦ä½ æ²’æœ‰è¢«è¿½ç¹³ã€æ²’æœ‰è¢«è¿«è³£å‡ºï¼Œä½ å°±é‚„åœ¨éŠæˆ²è£¡ï¼Œå¯ä»¥é é…æ¯æ…¢æ…¢ç†¬éå»ã€‚</p>
                <p>åœ¨é€™å€‹ç²¾ç®—å™¨è£¡ï¼š</p>
                <ul class="info-list">
                    <li>ç¶ ç‡ˆå¡ç‰‡ï¼šä»£è¡¨<strong>æ²’æœ‰è¿½ç¹³å£“åŠ›</strong>ï¼Œåªæ˜¯å¸³é¢ç¸®æ°´ã€‚</li>
                    <li>é»ƒç‡ˆå¡ç‰‡ï¼šä»£è¡¨<strong>é€²å…¥è£œç¹³å€</strong>ï¼Œä½†ä½ ä»å¯ä¸»å‹•é¸æ“‡è¦ä¸è¦è£œã€è£œå¤šå°‘ã€‚</li>
                    <li>ç´…ç‡ˆå¡ç‰‡ï¼šä»£è¡¨<strong>å·²è§¸åŠæ–·é ­ç·š</strong>ï¼Œå¦‚æœä¸è™•ç†ï¼Œæœ‰æ©Ÿæœƒè¢«å…¬å¸æˆ–åˆ¸å•†å¼·åˆ¶å‹•ä½œã€‚</li>
                </ul>

                <h4>â‘¡ ç´…æ¡†è£œç¹³é‡‘é¡ï¼ä½ åœ¨é€™å€‹æƒ…å¢ƒä¸‹ï¼ŒçœŸçš„éœ€è¦æå‡ºä¾†çš„éŒ¢</h4>
                <p>æ¯ä¸€å¼µå¡ç‰‡çš„ç´…æ¡†ï¼Œä»£è¡¨åœ¨ç›®å‰æ»‘æ¡¿ä½ç½®ä¸‹ï¼š</p>
                <ul class="info-list">
                    <li>ä¿å–®ï¼šå€Ÿæ¬¾æ¯”è¶…é 80% / 90%ï¼Œéœ€è¦è£œç¹³å¤šå°‘æœ¬é‡‘ï¼Œæ‰æœƒå›åˆ°å®‰å…¨å€ã€‚</li>
                    <li>ETFï¼šç¶­æŒç‡ä½æ–¼ 130%ï¼Œè¦è£œå¤šå°‘ä¿è­‰é‡‘ï¼Œæ‰èƒ½å›åˆ°åˆ¸å•†è¦æ±‚çš„ 166%ã€‚</li>
                </ul>
                <p>é€™äº›é‡‘é¡ä¸æ˜¯ã€Œæ„Ÿè¦ºã€ï¼Œè€Œæ˜¯<strong>è¨ˆç®—å‡ºä¾†çš„æœ€ä½è£œç¹³é‡‘é¡</strong>ï¼Œå°±æ˜¯ä½ åœ¨é‚£å€‹è‚¡ç½æƒ…å¢ƒä¸‹ï¼Œ<strong>çœŸçš„è¦å¾å£è¢‹è£¡æ‹¿å‡ºä¾†çš„éŒ¢</strong>ã€‚</p>

                <h4>â‘¢ æ˜¯å¦æœƒè¢«è¿½ç¹³ï¼Œçœ‹çš„æ˜¯ã€Œç´…æ¡†ç¸½é¡ vs ä½ çš„å¯å‹•ç”¨è³‡é‡‘ã€</h4>
                <p>ä½ çœŸæ­£è¦çœ‹çš„åªæœ‰ä¸€ä»¶äº‹ï¼š</p>
                <div style="background:#f9f9f9; padding:10px; border-radius:6px; font-family:monospace; font-size:0.95em;">
                    è‹¥ã€Œæ‰€æœ‰ç´…æ¡†è£œç¹³é‡‘é¡åŠ ç¸½ã€ â‰¤ ã€Œä½ èƒ½å‹•ç”¨çš„ç¾é‡‘ï¼‹ä¿å®ˆè³‡ç”¢ï¼‹é¡åº¦ã€<br>
                    âœ ä½ å°±ä¸æœƒè¢«è¿½ç¹³ã€ä¸æœƒè¢«è¿«æ–·é ­ã€‚
                </div>
                <p>ä½ ç›®å‰å¤§ç´„æœ‰ï¼š</p>
                <ul class="info-list">
                    <li>ç¾é‡‘å­˜é‡ï¼ˆç´„ 40ï½50 è¬ï¼‰ã€‚</li>
                    <li>ä¿å–® Eï¼ˆé é›„å„²è“„å‹ä¿å–®ï¼‰çš„ç¾é‡‘åƒ¹å€¼æˆ–å¯è²¸é¡åº¦ã€‚</li>
                    <li>ETF å°šå¯å†å€Ÿå‡ºçš„è³ªæŠ¼é¡åº¦ã€‚</li>
                    <li>å¾ªç’°ä¿¡è²¸ä»å¯å‹•ç”¨çš„é¡åº¦ã€‚</li>
                </ul>
                <p>ç²—ç•¥åŠ ç¸½ï¼Œä½ çš„ã€Œè‚¡ç½ç·Šæ€¥é å‚™é‡‘ã€å¤§ç´„åœ¨ <strong>130ï½150 è¬å€é–“</strong> å·¦å³ï¼ˆå¯¦éš›æ•¸å­—å¯ä»¥ä¾ç¾æ³å¾®èª¿ï¼‰ã€‚</p>
                <p><strong>åªè¦æ»‘åˆ° -30%ã€-40%ã€-50% æ™‚ï¼Œæ‰€æœ‰ç´…æ¡†è£œç¹³é‡‘é¡åŠ èµ·ä¾†æ²’æœ‰è¶…éé€™å€‹æ•¸å­—ï¼Œå°±ä»£è¡¨ï¼š</strong></p>
                <ul class="info-list">
                    <li>ä½ æœƒå¾ˆä¸èˆ’æœï¼ˆå¸³é¢è™§æè®Šå¤§ï¼‰ï¼Œä½†<strong>ä¸æœƒè¢«å¸‚å ´è¶•å‡ºå ´</strong>ã€‚</li>
                    <li>ä½ é‚„æ˜¯å¯ä»¥é æ¯æœˆé…æ¯ï¼‹è–ªæ°´ï¼Œæ…¢æ…¢é‚„å‚µã€æ…¢æ…¢ç­‰å¸‚å ´æ¢å¾©ã€‚</li>
                    <li>é€™äº›æ§“æ¡¿åªæ˜¯ã€ŒåŠ é€Ÿå·¥å…·ã€ï¼Œè€Œä¸æ˜¯éš¨æ™‚æœƒå¼•çˆ†çš„ç‚¸å½ˆã€‚</li>
                </ul>

                <h4>â‘£ é€™å¥—ç²¾ç®—å™¨çš„çœŸæ­£ç”¨é€”</h4>
                <p>æ‰€ä»¥ï¼Œæ¯æ¬¡ä½ åœ¨ç©é€™å€‹æ»‘æ¡¿æ™‚ï¼Œå…¶å¯¦æ˜¯åœ¨å•è‡ªå·±ï¼š</p>
                <ul class="info-list">
                    <li>ã€Œå¦‚æœæ˜å¤©çœŸçš„å†ä¾†ä¸€æ¬¡ 2008ï¼Œæˆ‘èƒ½ä¸èƒ½ç©©ç©©åœ°è£œç¹³å®Œï¼Œç„¶å¾Œç¹¼çºŒæ´»è‘—ï¼Ÿã€</li>
                    <li>ã€Œå¦‚æœç­”æ¡ˆæ˜¯ã€å¯ä»¥ï¼Œè€Œä¸”è£œç¹³é‡‘é¡é‚„åœ¨æˆ‘é å‚™é‡‘ç¯„åœå…§ã€ï¼Œé‚£æˆ‘ç¾åœ¨çš„æ§“æ¡¿å°±æ˜¯æˆ‘å¯ä»¥æ¥å—çš„ã€‚ã€</li>
                </ul>
                <p style="font-size:0.9em; color:#666">
                    é€™æ¨£ï¼Œä½ çœ‹å¾…å¸‚å ´å¤§è·Œï¼Œå°±æœƒå¾ã€Œå®Œäº†å®Œäº†æˆ‘è¦ç ´ç”¢äº†ã€<br>
                    è®Šæˆã€Œå¥½ï¼Œé€™å€‹æƒ…å¢ƒä¸‹æˆ‘å¤§æ¦‚è¦æ‹¿å‡ºå¤šå°‘è¬å°±èƒ½ç©©ä½ï¼Œå…¶ä»–äº¤çµ¦æ™‚é–“è·Ÿé…æ¯è™•ç†ã€ã€‚<br>
                    é€™å°±æ˜¯ä½ çœŸæ­£æƒ³è¦çš„å®‰å…¨æ„Ÿã€‚
                </p>
            </div>

            <div class="info-block">
                <h3>å¦‚ä½•è§£è®€ã€Œå¯æŠ—è·Œå¹…ã€èˆ‡æœªä¾†èª¿æ•´æ–¹å‘</h3>
                <ul class="info-list">
                    <li><strong>1ï¸âƒ£ è‹¥åœ¨ -40% ä»¥å…§éƒ½æ²’æœ‰ç´…æ¡†ï¼š</strong><br>
                        è¡¨ç¤ºä½ çš„æ§“æ¡¿æ§åˆ¶åœ¨ç›¸å°ç©©å¥å€é–“ï¼Œ<strong>å¯ä»¥æ‰¿å—ä¸€æ¬¡ 2008 ç­‰ç´šçš„è·Œå¹…</strong>ï¼Œè€Œä¸éœ€è¦è¢«è¿«è³£å‡ºè³‡ç”¢ã€‚é€™æ™‚å€™çš„èª¿æ•´é‡é»ï¼Œå¯ä»¥æ”¾åœ¨ã€Œæ…¢æ…¢é‚„ä¸€äº›ä¿å–®å€Ÿæ¬¾ã€æ‹‰é«˜å®‰å…¨é‚Šéš›ã€ã€‚</li>
                    <li><strong>2ï¸âƒ£ è‹¥åœ¨ -30% å·¦å³å°±å¤§é‡å‡ºç¾ç´…æ¡†ï¼š</strong><br>
                        ä»£è¡¨ä½ çš„çµæ§‹åç©æ¥µï¼Œåªè¦æ™¯æ°£å‡ºç¾ä¸€æ¬¡è¼ƒå¤§çš„ä¿®æ­£ï¼Œå°±å¯èƒ½è¢«è¦æ±‚è£œç¹³ã€‚<br>
                        é€™ç¨®ç‹€æ³ä¸‹ï¼Œå¯ä»¥å„ªå…ˆè€ƒæ…®ï¼š
                        <ul>
                            <li>å¾é…æ¯ä¸­æ’¥ä¸€éƒ¨åˆ†ï¼Œç”¨ä¾†é™ä½å€Ÿæ¬¾æ¯”ï¼ˆä¾‹å¦‚æŠŠ 55% æ‹‰å› 45%ï¼‰ã€‚</li>
                            <li>é©åº¦æ¸›å°‘é«˜æ³¢å‹•æ¨™çš„æ¯”é‡ï¼Œå¢åŠ å‚µåˆ¸æˆ–å„²è“„å‹ä¿å–®çš„å æ¯”ã€‚</li>
                        </ul>
                    </li>
                    <li><strong>3ï¸âƒ£ æŠŠé€™å€‹å·¥å…·ç•¶æˆã€Œèª¿æ§“æ¡¿å‰çš„æ¨¡æ“¬å™¨ã€ï¼š</strong><br>
                        æ¯æ¬¡ä½ è¦å¢åŠ å€Ÿæ¬¾ã€æˆ–æ‰“ç®—å¤šåšä¸€é»æ§“æ¡¿æ™‚ï¼Œå¯ä»¥å…ˆï¼š
                        <ol>
                            <li>åœ¨ä¸Šæ–¹å¡ç‰‡æŠŠæ–°å€Ÿæ¬¾é‡‘é¡è¼¸å…¥é€²å»ã€‚</li>
                            <li>æŠŠæ»‘æ¡¿æ‹‰åˆ° -30%ã€-40%ã€-50%ã€‚</li>
                            <li>ç¢ºèªç´…æ¡†çš„ç¸½è£œç¹³é‡‘é¡ï¼Œçœ‹çœ‹è‡ªå·±<span style="text-decoration: underline;">çœŸçš„æœ‰èƒ½åŠ›åœ¨è‚¡ç½ç™¼ç”Ÿæ™‚æå¾—å‡ºä¾†</span>ã€‚</li>
                        </ol>
                        å¦‚æœåœ¨æœ€ç³Ÿæƒ…å¢ƒä¸­ï¼Œä½ ä»ç„¶æ‹¿å¾—å‡ºé‚£äº›éŒ¢ï¼Œé‚£é€™ç­†æ§“æ¡¿å°±æ˜¯ã€Œç›¸å°å¯æ§ã€çš„ï¼›åä¹‹ï¼Œå°±è¦è¬¹æ…ã€‚
                    </li>
                </ul>
                <p style="font-size:0.9em; color:#666">
                    å¿ƒæ…‹ä¸Šï¼Œå¯ä»¥æŠŠé€™å€‹ç³»çµ±æƒ³æˆä½ å°ˆå±¬çš„ã€Œå£“åŠ›æ¸¬è©¦å„€è¡¨æ¿ã€ï¼š<br>
                    å¹³å¸¸å°ˆå¿ƒéç”Ÿæ´»ã€å¯«æ–‡ç« ã€æ‹ç…§ã€é™ªå®¶äººï¼Œ<br>
                    å¶çˆ¾æ‰“é–‹é€™å€‹é é¢æ»‘ä¸€æ»‘ï¼Œç¢ºèªä¸€ä¸‹â€”â€”ç›®å‰é€™æ¨£çš„æ§“æ¡¿æ°´æº–ï¼Œ<strong>åœ¨æœ€å£æƒ…æ³ä¸‹ä½ ä¹Ÿä¸æœƒè¢«å¸‚å ´è¶•å‡ºå ´</strong>ï¼Œå°±å¤ äº†ã€‚
                </p>
            </div>
        </div>
    </div>
</div>

<script>
    function switchTab(tabId, btnEl) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        btnEl.classList.add('active');
    }

    const initialAssets = [
        { id: 'A', name: 'ä¿å–® A (æ³•å·´å¹´é‡‘)', type: 1, val: 47.7, loan: 21.5, limit1: 80, limit2: 90, duration: '1å¹´ 2å€‹æœˆ' },
        { id: 'B', name: 'ä¿å–® B (æ³•å·´å£½éšª)', type: 1, val: 147.8, loan: 68.5, limit1: 80, limit2: 90, duration: '1å¹´ 1å€‹æœˆ' },
        { id: 'C', name: 'ä¿å–® C (å®‰é”å¹´é‡‘)', type: 1, val: 180, loan: 84, limit1: 80, limit2: 90, duration: '2å€‹æœˆ' },
        { id: 'D', name: 'ä¿å–® D (å®‰è¯ä¸»åŠ›)', type: 1, val: 328, loan: 90, limit1: 80, limit2: 90, duration: '4å€‹æœˆ' },
        { id: 'E', name: 'ä¿å–® E (é é›„äººå£½)', type: 2, val: 15, loan: 8, limit1: 95, limit2: 100, duration: 'å„²è“„å‹' },
        { id: 'ETF', name: 'å°è‚¡ ETF çµ„åˆ', type: 3, val: 171, loan: 34.5, limit1: 130, limit2: 115, duration: 'è³ªæŠ¼' }
    ];

    function renderAssets() {
        const grid = document.getElementById('cardGrid');
        grid.innerHTML = '';
        initialAssets.forEach(item => {
            const isETF = item.type === 3;
            const riskLabel = isETF ? 'ç¶­æŒç‡' : 'å€Ÿæ¬¾æ¯”';
            const html = `
            <div class="card safe" id="card-${item.id}">
                <div class="card-header">
                    <div class="asset-info">
                        <span class="asset-name">${item.name}</span>
                        <span class="duration-badge">ğŸ•’ ${item.duration}</span>
                    </div>
                    <span class="status-tag" id="tag-${item.id}" style="background:var(--success)">å®‰å…¨</span>
                </div>
                <div class="input-group">
                    <span>ç•¶å‰ç¾å€¼</span>
                    <div class="input-wrapper"><input type="number" class="editable-input" id="input-val-${item.id}" value="${item.val}" oninput="calculateAll()"><span class="unit">è¬</span></div>
                </div>
                <div class="input-group">
                    <span>å€Ÿæ¬¾é‡‘é¡</span>
                    <div class="input-wrapper"><input type="number" class="editable-input" id="input-loan-${item.id}" value="${item.loan}" oninput="calculateAll()"><span class="unit">è¬</span></div>
                </div>
                <div class="input-group" style="margin-top:15px; border-top:1px solid #eee; padding-top:10px;">
                    <span>ç½å¾Œæ¨¡æ“¬å€¼</span>
                    <span class="val-sim" id="sim-val-${item.id}">-- è¬</span>
                </div>
                
                <!-- è£œç¹³è­¦ç¤ºæ¡† -->
                <div id="alert-${item.id}" class="alert-box">
                    âš ï¸ <span id="alert-msg-${item.id}">éœ€è£œç¹³æœ¬é‡‘</span>
                    <span id="alert-amount-${item.id}" class="alert-amount">0 è¬</span>
                </div>

                <div class="bar-container"><div class="bar-fill" id="bar-${item.id}" style="width: 50%; background: var(--success);"></div></div>
                <div class="bar-info"><span id="risk-text-${item.id}">${riskLabel}: --%</span><span>${isETF ? 'å®‰å…¨ > 130%' : 'å®‰å…¨ < 80%'}</span></div>
            </div>`;
            grid.innerHTML += html;
        });
        calculateAll();
    }

    function calculateAll() {
        const sliderVal = document.getElementById('crashSlider').value;
        const marketDropPct = parseInt(sliderVal);
        document.getElementById('marketDropDisplay').innerText = `-${marketDropPct}%`;
        updateScenarioText(marketDropPct);

        initialAssets.forEach(item => {
            const inputVal = parseFloat(document.getElementById(`input-val-${item.id}`).value) || 0;
            const inputLoan = parseFloat(document.getElementById(`input-loan-${item.id}`).value) || 0;

            // Beta: ç©æ¥µå‹ä¿å–® 0.75, ETF 0.55, å…¶ä»– 0
            let beta = (item.type === 1) ? 0.75 : (item.type === 3) ? 0.55 : 0;
            const assetDropPct = marketDropPct * beta;
            const simulatedVal = inputVal * (1 - (assetDropPct / 100));

            let riskMetric = 0; let status = 'safe'; let statusText = 'å®‰å…¨'; let color = 'var(--success)'; let barWidth = 0;
            let cashNeeded = 0; // éœ€è£œç¹³é‡‘é¡

            if (item.type === 1 || item.type === 2) {
                // ä¿å–®é‚è¼¯
                if (simulatedVal > 0) riskMetric = (inputLoan / simulatedVal) * 100; else riskMetric = 999;
                
                if (riskMetric >= item.limit2) { status = 'danger'; statusText = 'æ–·é ­'; color = 'var(--danger)'; }
                else if (riskMetric >= item.limit1) { status = 'warn'; statusText = 'éœ€è£œç¹³'; color = 'var(--warning)'; }

                // è¨ˆç®—è£œç¹³ï¼šç›®æ¨™é™å› limit1 (é€šå¸¸æ˜¯ 80%)
                if (riskMetric >= item.limit1) {
                    const targetLoan = simulatedVal * (item.limit1 / 100);
                    cashNeeded = inputLoan - targetLoan;
                }

                barWidth = Math.min(riskMetric, 100);
                document.getElementById(`risk-text-${item.id}`).innerText = `å€Ÿæ¬¾æ¯”: ${riskMetric.toFixed(1)}%`;

            } else {
                // ETF é‚è¼¯
                if (inputLoan > 0) riskMetric = (simulatedVal / inputLoan) * 100; else riskMetric = 999;

                if (riskMetric <= item.limit2) { status = 'danger'; statusText = 'æ–·é ­'; color = 'var(--danger)'; }
                else if (riskMetric <= item.limit1) { status = 'warn'; statusText = 'è¿½ç¹³'; color = 'var(--warning)'; }

                // è¨ˆç®—è£œç¹³ï¼šSOP æ˜¯è¦è£œå› 166%
                if (riskMetric <= item.limit1) {
                    const targetLoan = simulatedVal / 1.66;
                    cashNeeded = inputLoan - targetLoan;
                }

                barWidth = Math.min((riskMetric / 300) * 100, 100);
                document.getElementById(`risk-text-${item.id}`).innerText = `ç¶­æŒç‡: ${riskMetric.toFixed(0)}%`;
            }

            // æ›´æ–° UI
            document.getElementById(`sim-val-${item.id}`).innerText = `${simulatedVal.toFixed(1)} è¬`;
            if (marketDropPct > 0) document.getElementById(`sim-val-${item.id}`).innerHTML += ` <span style='font-size:0.8em; color:#999'>(-${assetDropPct.toFixed(1)}%)</span>`;
            
            document.getElementById(`tag-${item.id}`).innerText = statusText;
            document.getElementById(`tag-${item.id}`).style.background = color;
            document.getElementById(`bar-${item.id}`).style.width = `${barWidth}%`;
            document.getElementById(`bar-${item.id}`).style.background = color;
            document.getElementById(`card-${item.id}`).className = `card ${status}`;

            // é¡¯ç¤ºè£œç¹³é‡‘é¡
            const alertBox = document.getElementById(`alert-${item.id}`);
            if (cashNeeded > 0) {
                alertBox.style.display = 'block';
                document.getElementById(`alert-msg-${item.id}`).innerText = isNaN(cashNeeded) ? "éŒ¯èª¤" : (item.type===3 ? "éœ€è£œå›ç¶­æŒç‡166%" : "éœ€é™è‡³å€Ÿæ¬¾æ¯”80%");
                document.getElementById(`alert-amount-${item.id}`).innerText = `${Math.ceil(cashNeeded)} è¬`;
            } else {
                alertBox.style.display = 'none';
            }
        });
    }

    function updateScenarioText(pct) {
        const title = document.getElementById('scenarioTitle');
        const desc = document.getElementById('scenarioDesc');
        const box = document.getElementById('scenarioBox');
        box.className = "scenario-box"; title.style.color = "";

        if(pct === 0) {
            title.innerHTML = "ğŸŸ¢ ç‹€æ…‹ï¼šå¹³ç©© (ç·¨è¼¯æ¨¡å¼)";
            desc.innerHTML = "ç©æ¥µå‹ä¿å–®åœ¨å¤šé ­è¡¨ç¾ä½³ã€‚è«‹å˜—è©¦æ‹‰å‹•æ»‘æ¡¿ï¼Œæ¸¬è©¦æ¥µç«¯é¢¨éšªã€‚";
        } else if(pct < 35) {
            title.innerHTML = "ğŸŸ¡ æ¨¡æ“¬æƒ…å¢ƒï¼š2020 / 2022 (-30%)";
            desc.innerHTML = "è³‡ç”¢ç¸®æ°´ä½†å°šåœ¨å¯æ§ç¯„åœï¼Œæ³¨æ„é«˜æ§“æ¡¿é …ç›®æ˜¯å¦å‡ºç¾è£œç¹³æç¤ºã€‚";
            title.style.color = "#e67e22";
        } else if(pct < 60) {
            title.innerHTML = "ğŸŸ  æ¨¡æ“¬æƒ…å¢ƒï¼š2008 é‡‘èæµ·å˜¯ (-50%)";
            desc.innerHTML = "ç©æ¥µå‹ä¿å–®å£“åŠ›å¢å¤§ï¼Œè«‹æº–å‚™ç¾é‡‘æˆ–å‹•ç”¨å„²è“„éšªã€‚";
            title.style.color = "var(--danger)";
        } else {
            title.innerHTML = "âš« æ¨¡æ“¬æƒ…å¢ƒï¼š2000 ç¶²è·¯æ³¡æ²« (-67%)";
            desc.innerHTML = "æ¥µé™æ¸¬è©¦ï¼è«‹æŸ¥çœ‹ä¸‹æ–¹ç´…æ¡†ï¼Œé€™å°±æ˜¯æ‚¨åœ¨æœ€å£æƒ…æ³ä¸‹éœ€è¦çš„æ•‘å‘½éŒ¢ã€‚";
            box.className = "scenario-box black-swan";
        }
    }
    renderAssets();
</script>

</body>
</html>
